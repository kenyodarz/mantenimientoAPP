<div class="ui-g p-fluid">
  <p-panel header="Equipo">
    <form [formGroup]="equipoForm">
      <!-- Primera Fila -->
      <div class="row-1">
        <div class="column column-1">
          <span class="p-float-label">
            <input type="text" formControlName="nombre" readonly pInputText />
            <label for="inputtext">Maquina/Equipo</label>
          </span>
        </div>
        <div class="column column-2">
          <span class="p-float-label">
            <input type="text" formControlName="section" readonly pInputText />
            <label for="inputtext">Seccion</label>
          </span>
        </div>
        <div class="column column-3">
          <span class="p-float-label">
            <input type="text" formControlName="code" readonly pInputText />
            <label for="inputtext">Codigo</label>
          </span>
        </div>
      </div>
      <!-- Segunda Fila -->
      <div class="row-2">
        <div class="column column-1">
          <span class="p-float-label">
            <input type="text" formControlName="marca" pInputText />
            <label for="inputtext">Marca</label>
          </span>
        </div>
        <div class="column column-2">
          <span class="p-float-label">
            <input type="text" formControlName="modelo" pInputText />
            <label for="inputtext">Modelo</label>
          </span>
        </div>
        <div class="column column-3">
          <span class="p-float-label">
            <input type="text" formControlName="tipo" pInputText />
            <label for="inputtext">Tipo</label>
          </span>
        </div>
        <div class="column column-4">
          <span class="p-float-label">
            <input type="text" formControlName="numeroSerie" pInputText />
            <label for="inputtext">No. Serie</label>
          </span>
        </div>
        <div class="column column-5">
          <span class="p-float-label">
            <input type="text" formControlName="dimensiones" pInputText />
            <label for="inputtext">Dimensiones</label>
          </span>
        </div>
      </div>
      <!-- Tercera Fila -->
      <div class="row-3">
        <div class="column column-6">
          <span class="p-float-label">
            <input type="text" formControlName="peso" pInputText />
            <label for="inputtext">Peso</label>
          </span>
        </div>
        <div class="column column-7">
          <span class="p-float-label">
            <input type="text" formControlName="capacidadTrabajo" pInputText />
            <label for="inputtext">Cap. Trabajo</label>
          </span>
        </div>
        <div class="column column-8">
          <span class="p-float-label">
            <input type="text" formControlName="voltaje" pInputText />
            <label for="inputtext">Volt.(V)</label>
          </span>
        </div>
        <div class="column column-9">
          <span class="p-float-label">
            <input type="text" formControlName="amperaje" pInputText />
            <label for="inputtext">AMP</label>
          </span>
        </div>
        <div class="column column-10">
          <span class="p-float-label">
            <input type="text" formControlName="ciclos" pInputText />
            <label for="inputtext">Ciclos</label>
          </span>
        </div>
        <div class="column column-11">
          <span class="p-float-label">
            <input type="text" formControlName="kw" pInputText />
            <label for="inputtext">KW</label>
          </span>
        </div>
      </div>
      <!-- Cuarta Fila -->
      <div class="row-4">
        <div class="column column-1">
          <span class="p-float-label">
            <textarea
              formControlName="description"
              rows="5"
              cols="30"
              pInputTextarea
            ></textarea>
            <label for="float-input">Descripción</label>
          </span>
        </div>
      </div>
    </form>
    <ng-template pTemplate="footer">
      <p-button
        label="Guardar"
        [disabled]="equipoForm.invalid"
        (onClick)="onGuardarEquipo()"
        styleClass="p-button-text"
      ></p-button>
    </ng-template>
  </p-panel>
  <p-panel [toggleable]="true" [collapsed]="!motor" header="Motor">
    <form [formGroup]="motorForm">
      <div class="row-1">
        <div class="column column-1">
          <span class="p-float-label">
            <input type="text" formControlName="marca" pInputText />
            <label for="inputtext">Marca*</label>
          </span>
        </div>
        <div class="column column-2">
          <span class="p-float-label">
            <input type="text" formControlName="modelo" pInputText />
            <label for="inputtext">Modelo*</label>
          </span>
        </div>
        <div class="column column-3">
          <span class="p-float-label">
            <input type="text" formControlName="tipo" pInputText />
            <label for="inputtext">Tipo</label>
          </span>
        </div>
        <div class="column column-4">
          <span class="p-float-label">
            <input type="text" formControlName="clase" pInputText />
            <label for="inputtext">Clase</label>
          </span>
        </div>
        <div class="column column-5">
          <span class="p-float-label">
            <input type="text" formControlName="fase" pInputText />
            <label for="inputtext">Fase*</label>
          </span>
        </div>
        <div class="column column-6">
          <span class="p-float-label">
            <input type="text" formControlName="noSerie" pInputText />
            <label for="inputtext">Numero Serie</label>
          </span>
        </div>
      </div>
      <div class="row-2">
        <div class="column column-1">
          <span class="p-float-label">
            <input type="text" formControlName="aislamiento" pInputText />
            <label for="inputtext">Aislamiento</label>
          </span>
        </div>
        <div class="column column-2">
          <span class="p-float-label">
            <input type="text" formControlName="connection" pInputText />
            <label for="inputtext">Conexión</label>
          </span>
        </div>
        <div class="column column-3">
          <span class="p-float-label">
            <input type="text" formControlName="fs" pInputText />
            <label for="inputtext">F.S</label>
          </span>
        </div>
        <div class="column column-4">
          <span class="p-float-label">
            <input type="text" formControlName="hp" pInputText />
            <label for="inputtext">HP*</label>
          </span>
        </div>
        <div class="column column-5">
          <span class="p-float-label">
            <input type="text" formControlName="rpm" pInputText />
            <label for="inputtext">RPM*</label>
          </span>
        </div>
        <div class="column column-6">
          <span class="p-float-label">
            <input type="text" formControlName="voltaje" pInputText />
            <label for="inputtext">Volt.*</label>
          </span>
        </div>
      </div>
      <div class="row-3">
        <div class="column column-1">
          <span class="p-float-label">
            <input type="text" formControlName="amperaje" pInputText />
            <label for="inputtext">AMP*</label>
          </span>
        </div>
        <div class="column column-2">
          <span class="p-float-label">
            <input type="text" formControlName="frecuencia" pInputText />
            <label for="inputtext">Frecuencia*</label>
          </span>
        </div>
        <div class="column column-3">
          <span class="p-float-label">
            <input type="text" formControlName="cos" pInputText />
            <label for="inputtext">COS</label>
          </span>
        </div>
        <div class="column column-4">
          <span class="p-float-label">
            <input type="text" formControlName="kw" pInputText />
            <label for="inputtext">KW</label>
          </span>
        </div>
      </div>
    </form>
    <ng-template pTemplate="footer">
      <p-button
        label="Guardar"
        [disabled]="motorForm.invalid"
        (onClick)="onGuardarMotor()"
        styleClass="p-button-text"
      ></p-button>
    </ng-template>
  </p-panel>
  <p-panel [toggleable]="true" [collapsed]="!reductor" header="Reductor">
    <form [formGroup]="reductorForm">
      <div class="row-1">
        <div class="column column-1">
          <span class="p-float-label">
            <input type="text" formControlName="marca" pInputText />
            <label for="inputtext">Marca</label>
          </span>
        </div>
        <div class="column column-2">
          <span class="p-float-label">
            <input type="text" formControlName="modelo" pInputText />
            <label for="inputtext">Modelo</label>
          </span>
        </div>
        <div class="column column-3">
          <span class="p-float-label">
            <input type="text" formControlName="tipo" pInputText />
            <label for="inputtext">Tipo*</label>
          </span>
        </div>
        <div class="column column-4">
          <span class="p-float-label">
            <input type="text" formControlName="noSerie" pInputText />
            <label for="inputtext">Numero Serie</label>
          </span>
        </div>
        <div class="column column-5">
          <span class="p-float-label">
            <input type="text" formControlName="rpm" pInputText />
            <label for="inputtext">RPM</label>
          </span>
        </div>
        <div class="column column-6">
          <span class="p-float-label">
            <input type="text" formControlName="hp" pInputText />
            <label for="inputtext">HP</label>
          </span>
        </div>
      </div>
      <div class="row-2">
        <div class="column column-1">
          <span class="p-float-label">
            <input type="text" formControlName="relation" pInputText />
            <label for="inputtext">Relacion</label>
          </span>
        </div>
        <div class="column column-2">
          <span class="p-float-label">
            <input type="text" formControlName="rpmSalida" pInputText />
            <label for="inputtext">RPM Salida</label>
          </span>
        </div>
      </div>
    </form>
    <ng-template pTemplate="footer">
      <p-button
        label="Guardar"
        [disabled]="reductorForm.invalid"
        (onClick)="onGuardarReductor()"
        styleClass="p-button-text"
      ></p-button>
    </ng-template>
  </p-panel>
  <p-panel
    [toggleable]="true"
    [collapsed]="lubricasteList.length === 0"
    header="Lubricacion"
  >
    <p-table
      [value]="lubricasteList"
      [responsive]="true"
      dataKey="idLubricante"
      editMode="row"
    >
    <ng-template pTemplate="caption">
        <button
          pButton
          pRipple
          type="button"
          icon="pi pi-plus"
          class="p-button-rounded p-button-text p-button-success"
          (click)="displaySaveEditDialog = true; lubricanteForm.reset()"
        ></button>
    </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th>PARTE</th>
          <th>METODO</th>
          <th>LUBRICANTE</th>
          <th>FRECUENCIA</th>
          <th>NOTAS</th>
          <th>ACC</th>
        </tr>
      </ng-template>
      <ng-template
        pTemplate="body"
        let-lubricante
        let-editing="editing"
        let-ri="rowIndex"
      >
        <tr [pEditableRow]="lubricante">
          <td pEditableColumn>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <input pInputText type="text" [(ngModel)]="lubricante.parte" />
              </ng-template>
              <ng-template pTemplate="output">
                {{ lubricante.parte }}
              </ng-template>
            </p-cellEditor>
          </td>
          <td pEditableColumn>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <input pInputText type="text" [(ngModel)]="lubricante.method" />
              </ng-template>
              <ng-template pTemplate="output">
                {{ lubricante.method }}
              </ng-template>
            </p-cellEditor>
          </td>
          <td pEditableColumn>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <input
                  pInputText
                  type="text"
                  [(ngModel)]="lubricante.lubricante"
                />
              </ng-template>
              <ng-template pTemplate="output">
                {{ lubricante.lubricante }}
              </ng-template>
            </p-cellEditor>
          </td>
          <td pEditableColumn>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <input
                  pInputText
                  type="text"
                  [(ngModel)]="lubricante.frecuencia"
                />
              </ng-template>
              <ng-template pTemplate="output">
                {{ lubricante.frecuencia }}
              </ng-template>
            </p-cellEditor>
          </td>
          <td pEditableColumn>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <input pInputText type="text" [(ngModel)]="lubricante.notas" />
              </ng-template>
              <ng-template pTemplate="output">
                {{ lubricante.notas }}
              </ng-template>
            </p-cellEditor>
          </td>
          <td style="text-align: center">
            <button
              *ngIf="!editing"
              pButton
              pRipple
              type="button"
              pInitEditableRow
              icon="pi pi-pencil"
              class="p-button-rounded p-button-text"
            ></button>
            <button
              *ngIf="!editing"
              pButton
              pRipple
              type="button"
              icon="pi pi-trash"
              class="p-button-rounded p-button-text p-button-danger"
              (click)="onRowDelete(lubricante)"
            ></button>
            <button
              *ngIf="editing"
              pButton
              pRipple
              type="button"
              pSaveEditableRow
              icon="pi pi-check"
              (click)="onRowEditSave(lubricante)"
              class="p-button-rounded p-button-text p-button-success p-mr-2"
            ></button>
            <button
              *ngIf="editing"
              pButton
              pRipple
              type="button"
              pCancelEditableRow
              icon="pi pi-times"
              class="p-button-rounded p-button-text p-button-danger"
            ></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </p-panel>
</div>

<!-- Modal Guardar / Editar -->
<p-dialog
  [(visible)]="displaySaveEditDialog"
  [modal]="true"
  [style]="{ width: '50vw' }"
  [baseZIndex]="10000"
  [draggable]="false"
  [resizable]="false"
  header="Lubricación"
>
  <form [formGroup]="lubricanteForm" (ngSubmit)="onGuardarLubricante()">
    <div class="p-fluid forms-grid" style="margin: 1em 0">
      <div>
        <div>Parte</div>
        <input
          pInputText
          type="text"
          formControlName="parte"
          placeholder="Parte"
        />
        <p-message
          severity="error"
          text="Es necesario ingresar la parte"
          *ngIf="
            !lubricanteForm.controls['parte'].valid &&
            lubricanteForm.controls['parte'].dirty
          "
        ></p-message>
      </div>
      <div>
        <div>Lubricante</div>
        <input
          pInputText
          type="text"
          formControlName="lubricante"
          placeholder="Lubricante"
        />
        <p-message
          severity="error"
          text="Ingrese un lubricante"
          *ngIf="
            !lubricanteForm.controls['lubricante'].valid &&
            lubricanteForm.controls['lubricante'].dirty
          "
        ></p-message>
      </div>
    </div>
  </form>
  <ng-template pTemplate="footer">
    <p-button
      icon="pi pi-check"
      (click)="displaySaveEditDialog = false; onGuardarLubricante()"
      label="Guardar"
      [disabled]="lubricanteForm.invalid"
      styleClass="p-button-text"
    ></p-button>
  </ng-template>
</p-dialog>
